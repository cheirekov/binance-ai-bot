# Copy to `.env` and edit. Never commit real secrets.
NODE_ENV=development                         # dev/production toggle
PORT=8788                                    # Backend API port (Fastify)
FRONTEND_ORIGIN=http://localhost:4173        # CORS allow-list for the UI origin

# Binance API credentials (use restricted keys; enable IP restrictions!)
BINANCE_API_KEY=your_key
BINANCE_API_SECRET=your_secret
BINANCE_BASE_URL=https://api.binance.com     # Spot testnet: https://testnet.binance.vision

# Live orders: MUST be true to place real orders (used by both UI + auto-trader).
TRADING_ENABLED=false

# OpenAI API (optional; bot runs with heuristics if missing)
OPENAI_API_KEY=your_openai_api_key
OPENAI_MODEL=gpt-4.1-mini                    # Lower cost; upgrade for stronger reasoning

# Strategy defaults
SYMBOL=BTCUSDC                               # Default symbol used when UI doesn't specify `?symbol=`
QUOTE_ASSET=USDC                             # Preferred "home" quote asset (display + sizing baseline)
HOME_ASSET=USDC                              # Asset to return to in risk-off (usually same as QUOTE_ASSET)

# Universe selection:
# - If `ALLOWED_SYMBOLS` is NON-empty: auto-select stays within it (safe).
# - If `ALLOWED_SYMBOLS` is empty: bot auto-discovers SPOT symbols whose quote asset is in `ALLOWED_QUOTES`.
ALLOWED_SYMBOLS=                             # e.g. BTCUSDC,ETHUSDC (leave blank for auto-discover)
ALLOWED_QUOTES=USDC,EUR                      # EU-friendly; add BTC only if you actually hold BTC
AUTO_SELECT_SYMBOL=true                      # Scheduler picks best symbol periodically
AUTO_DISCOVER_SYMBOLS=true                   # Use Binance exchangeInfo to find tradable SPOT symbols
UNIVERSE_MAX_SYMBOLS=50                      # Candidate pool size (higher = broader scan, more CPU)

# Liquidity / volatility filters
MIN_QUOTE_VOLUME=5000000                     # 24h quote-volume floor for stable/fiat quotes (USDC/EUR/USDT)
MAX_VOLATILITY_PCT=18                        # 24h high/low volatility cap (%)
BLACKLIST_SYMBOLS=                           # Comma list to hard-block specific symbols

# News sentiment (optional)
# Must be direct RSS/Atom XML endpoints (not HTML pages). Example:
NEWS_FEEDS=https://www.coindesk.com/arc/outboundfeeds/rss/,https://cointelegraph.com/rss
NEWS_CACHE_MINUTES=15                        # Cache duration for feeds
NEWS_WEIGHT=2                                # Influence of sentiment in scoring

# Persistence
PERSISTENCE_PATH=/app/data/state.json        # Docker volume path for state (compose mounts `./data:/app/data`)

# Auto-trading
AUTO_TRADE_ENABLED=false                     # True enables the scheduler to place orders automatically
AUTO_TRADE_HORIZON=short                     # Preferred horizon; bot may override if conditions differ
AUTO_TRADE_MIN_CONFIDENCE=55                 # Min confidence % to trade
AUTO_TRADE_COOLDOWN_MINUTES=90               # Cooldown per symbol/horizon (minutes)
DAILY_LOSS_CAP_PCT=3                         # Stops new entries if open position loss exceeds this %
SLIPPAGE_BPS=8                               # Reduce size by this many bps to account for slippage
OCO_ENABLED=true                             # Place TP/SL OCO after entry (Binance must support OCO for symbol)

# Portfolio mode (optional; more automation)
PORTFOLIO_ENABLED=false                      # If true: manage multiple positions across top-ranked symbols
PORTFOLIO_MAX_ALLOC_PCT=50                   # Max % of HOME_ASSET to allocate (approx; based on tracked positions)
PORTFOLIO_MAX_POSITIONS=3                    # Max simultaneous open long positions
CONVERSION_ENABLED=false                     # Allow converting HOME_ASSET->needed quote (e.g., USDC->BTC) when required
RISK_OFF_SENTIMENT=-0.5                      # If news sentiment <= this, close positions + move back to HOME_ASSET

# Risk sizing
MAX_POSITION_SIZE_USDT=200                   # Max notional used for sizing (USDT-equivalent)
RISK_PER_TRADE_BP=50                         # Basis points risked per trade (50=0.5%)
REFRESH_SECONDS=30                           # Strategy refresh interval

# API/UI auth
API_KEY=change_me                            # Backend requires `x-api-key: ...` on every request if set
CLIENT_KEY=change_me                         # Client key used by the browser UI to call the API
BASIC_AUTH_USER=bot                          # UI basic auth user (Docker web image build arg)
BASIC_AUTH_PASS=botpass                      # UI basic auth password (Docker web image build arg)

# Frontend
VITE_API_URL=http://localhost:8788           # API endpoint for frontend
VITE_CLIENT_KEY=change_me                    # Must match CLIENT_KEY (sent as `x-api-key`)
