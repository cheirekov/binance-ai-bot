# Futures profile (recommended starting defaults; USD-M Futures)
# Copy to `.env` (or merge into your existing `.env`) and edit. Never commit real secrets.
NODE_ENV=production
PORT=8788
FRONTEND_ORIGIN=http://localhost:4173

# Binance API credentials (must have USD-M Futures permissions; use restricted keys + IP allow-list)
BINANCE_API_KEY=your_key
BINANCE_API_SECRET=your_secret
BINANCE_BASE_URL=https://api.binance.com

# Trading venue (USD-M futures)
TRADE_VENUE=futures
FUTURES_BASE_URL=https://fapi.binance.com

# Extra safety gate for futures orders (must be true to place futures orders)
FUTURES_ENABLED=false

# Live orders: MUST be true to place real orders.
TRADING_ENABLED=false

# OpenAI API (optional; strategies still run with heuristics if missing)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4.1-mini
OPENAI_BASE_URL=                             # Optional: OpenAI-compatible endpoint (local Ollama/vLLM/llama.cpp)
AI_POLICY_MODE=off                          # off | advisory | gated-live
AI_POLICY_MODEL=gpt-4.1-mini
AI_POLICY_MIN_INTERVAL_SECONDS=300
AI_POLICY_MAX_CALLS_PER_DAY=200
AI_POLICY_MAX_CANDIDATES=8
AI_POLICY_MAX_GRID_ALLOC_INCREASE_PCT_PER_DAY=5
AI_POLICY_TUNING_AUTO_APPLY=false
AI_POLICY_SWEEP_AUTO_APPLY=false
AI_POLICY_SWEEP_COOLDOWN_MINUTES=180
AI_POLICY_ALLOW_RISK_RELAXATION=false        # DANGEROUS: allows AI "resume"/risk relax actions when profile permits

# AI autonomy & coach (slow loop)
# Profiles (pick one):
# - safe: suggest-only; may pause grid buys; never relax risk automatically
# - standard: auto-apply tightening; auto-blacklist; no relax
# - pro: can relax within envelope only if AI_POLICY_ALLOW_RISK_RELAXATION=true and governor NORMAL
# - aggressive: pro + can take faster actions (still bounded)
AI_AUTONOMY_PROFILE=safe                     # safe | standard | pro | aggressive
AI_COACH_INTERVAL_SECONDS=600
AI_COACH_MIN_EQUITY_USD=200

# AI tuning envelope (min..max). Recommended presets (copy one):
# safe:      MIN_QUOTE_VOLUME_RANGE=20000000..60000000  MAX_VOLATILITY_RANGE=4..12  RISK_BP_RANGE=5..25   PORTFOLIO_MAX_POS_RANGE=1..2  GRID_MAX_ALLOC_RANGE=0..0
# standard:  MIN_QUOTE_VOLUME_RANGE=15000000..60000000  MAX_VOLATILITY_RANGE=4..15  RISK_BP_RANGE=5..35   PORTFOLIO_MAX_POS_RANGE=1..3  GRID_MAX_ALLOC_RANGE=0..0
# pro:       MIN_QUOTE_VOLUME_RANGE=15000000..80000000  MAX_VOLATILITY_RANGE=4..18  RISK_BP_RANGE=5..50   PORTFOLIO_MAX_POS_RANGE=1..4  GRID_MAX_ALLOC_RANGE=0..0
# aggressive:MIN_QUOTE_VOLUME_RANGE=10000000..80000000  MAX_VOLATILITY_RANGE=4..24  RISK_BP_RANGE=5..80   PORTFOLIO_MAX_POS_RANGE=1..5  GRID_MAX_ALLOC_RANGE=0..0
MIN_QUOTE_VOLUME_RANGE=15000000..60000000
MAX_VOLATILITY_RANGE=4..15
RISK_BP_RANGE=5..35
PORTFOLIO_MAX_POS_RANGE=1..3
GRID_MAX_ALLOC_RANGE=0..0

# Symbol policy: optional whitelist + dynamic TTL bans (applies to candidate selection)
SYMBOL_WHITELIST=
AUTO_BLACKLIST_ENABLED=true
AUTO_BLACKLIST_TTL_MIN=360
AUTO_BLACKLIST_TRIGGERS=volumeBelowFloor,spreadTooHigh,volatilitySpike,repeatedSlippage

# Futures defaults:
# - USD-M futures margin is typically USDT. If your account uses another margin asset, adjust.
SYMBOL=BTCUSDT
QUOTE_ASSET=USDT
HOME_ASSET=USDT

# Universe selection (USD-M is mostly ...USDT). Keep this narrow for safety.
ALLOWED_SYMBOLS=
ALLOWED_QUOTES=USDT
AUTO_SELECT_SYMBOL=true
AUTO_DISCOVER_SYMBOLS=true
UNIVERSE_MAX_SYMBOLS=30

# Liquidity / volatility filters (tighter recommended for futures)
MIN_QUOTE_VOLUME=20000000
MAX_VOLATILITY_PCT=12
BLACKLIST_SYMBOLS=

# News sentiment (optional; must be direct RSS/Atom XML endpoints)
NEWS_FEEDS=https://cointelegraph.com/rss,https://cryptoslate.com/feed/,https://decrypt.co/feed
NEWS_CACHE_MINUTES=20
NEWS_WEIGHT=2

# Persistence
PERSISTENCE_PATH=/app/data/state.json
PERSIST_TO_SQLITE=false
SQLITE_PATH=/app/data/bot.sqlite

# Futures risk controls (start conservative)
FUTURES_LEVERAGE=2
FUTURES_MARGIN_TYPE=ISOLATED

# Auto-trading (keep off until youâ€™ve funded the futures wallet + tested)
AUTO_TRADE_ENABLED=false
AUTO_TRADE_HORIZON=short
AUTO_TRADE_MIN_CONFIDENCE=65
AUTO_TRADE_COOLDOWN_MINUTES=240
DAILY_LOSS_CAP_PCT=1.5
SLIPPAGE_BPS=12
OCO_ENABLED=false

# Portfolio mode (recommended OFF for futures until stable)
PORTFOLIO_ENABLED=false
PORTFOLIO_MAX_ALLOC_PCT=20
PORTFOLIO_MAX_POSITIONS=1
CONVERSION_ENABLED=false
RISK_OFF_SENTIMENT=-0.3

# Risk sizing (futures: smaller is safer)
MAX_POSITION_SIZE_USDT=50
RISK_PER_TRADE_BP=20
REFRESH_SECONDS=45

# API/UI auth
API_KEY=change_me
CLIENT_KEY=change_me
BASIC_AUTH_USER=bot
BASIC_AUTH_PASS=botpass

# Frontend
VITE_API_URL=http://localhost:8788
VITE_CLIENT_KEY=change_me
