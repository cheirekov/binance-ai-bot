# Advanced / Spot
#
# This file includes detailed comments and extra knobs.
# Copy to .env:
#   cp .env.spot.advanced.example .env

### Exchange
BINANCE_API_KEY=
BINANCE_API_SECRET=
BINANCE_BASE_URL=https://api.binance.com

### Venue
TRADE_VENUE=spot

### Safety switches
TRADING_ENABLED=false
AUTO_TRADE_ENABLED=false

### Universe policy (candidates + execution gate)
# If TRADE_UNIVERSE is non-empty, the bot will only consider and open NEW trades on these symbols
# (minus TRADE_DENYLIST and any auto/account blacklist).
TRADE_UNIVERSE=

# If TRADE_UNIVERSE is empty, the bot auto-discovers symbols from exchangeInfo, then filters by:
# - QUOTE_ASSETS
# - MIN_QUOTE_VOLUME
# - MAX_VOLATILITY_PCT
# - internal heuristics (e.g. avoid stable/stable and leverage tokens)
QUOTE_ASSETS=USDT,USDC,EUR

# Hard denylist: always excluded from new entries
TRADE_DENYLIST=

# How many discovered symbols to keep in memory for ranking
UNIVERSE_MAX_SYMBOLS=50

AUTO_SELECT_SYMBOL=true
AUTO_DISCOVER_SYMBOLS=true

### AI (OpenAI-compatible)
AI_MODE=off
AI_AUTONOMY_PROFILE=safe

AI_API_KEY=
AI_BASE_URL=

# Default model for all AI pillars
AI_MODEL=gpt-4.1-mini

# Optional per-pillar overrides (empty -> AI_MODEL)
AI_POLICY_MODEL=
AI_STRATEGY_MODEL=

# Policy rate limits (token control)
AI_POLICY_MIN_INTERVAL_SECONDS=300
AI_POLICY_MAX_CALLS_PER_DAY=200
AI_POLICY_MAX_CANDIDATES=8

# Safety: risk relaxation is opt-in
AI_POLICY_ALLOW_RISK_RELAXATION=false

# Auto-apply (keep false by default)
AI_POLICY_TUNING_AUTO_APPLY=false
AI_POLICY_SWEEP_AUTO_APPLY=false
AI_POLICY_SWEEP_COOLDOWN_MINUTES=180

# Slow-loop coach
AI_COACH_ENABLED=true
AI_COACH_INTERVAL_SECONDS=600
AI_COACH_MIN_EQUITY_USD=200

# Envelope bounds for coach/policy tuning suggestions
MIN_QUOTE_VOLUME_RANGE=3000000..30000000
MAX_VOLATILITY_RANGE=6..18
RISK_BP_RANGE=10..60
PORTFOLIO_MAX_POS_RANGE=1..4
GRID_MAX_ALLOC_RANGE=10..35

### Strategy + risk
MAX_POSITION_SIZE_USDT=200
RISK_PER_TRADE_BP=50
DAILY_LOSS_CAP_PCT=3
MIN_QUOTE_VOLUME=5000000
MAX_VOLATILITY_PCT=18

REFRESH_SECONDS=30
SLIPPAGE_BPS=8

### Portfolio mode
PORTFOLIO_ENABLED=false
PORTFOLIO_MAX_ALLOC_PCT=50
PORTFOLIO_MAX_POSITIONS=3
AUTO_TRADE_HORIZON=short
AUTO_TRADE_MIN_CONFIDENCE=55
AUTO_TRADE_COOLDOWN_MINUTES=90

### Spot-only features
OCO_ENABLED=true
CONVERSION_ENABLED=false

### Grid (spot-only)
GRID_ENABLED=false
GRID_AUTO_DISCOVER=true
GRID_SYMBOLS=
GRID_MAX_ALLOC_PCT=25
GRID_MAX_ACTIVE_GRIDS=1
GRID_LEVELS=21
GRID_KLINE_INTERVAL=1h
GRID_KLINE_LIMIT=120
GRID_MIN_RANGE_PCT=3
GRID_MAX_RANGE_PCT=15
GRID_MAX_TREND_RATIO=0.35
GRID_GAP_BPS=10
GRID_MIN_STEP_PCT=0.6
GRID_REBALANCE_SECONDS=60
GRID_MAX_NEW_ORDERS_PER_TICK=8
GRID_BOOTSTRAP_BASE_PCT=50
GRID_BREAKOUT_ACTION=cancel
GRID_BREAKOUT_BUFFER_PCT=0.5
GRID_BUY_PAUSE_ON_LIQUIDITY_HALT=true
LIQUIDITY_RESUME_TICKS=3
LIQUIDITY_RESUME_MINUTES=5

### Auto-blacklist
AUTO_BLACKLIST_ENABLED=true
AUTO_BLACKLIST_TTL_MIN=360
AUTO_BLACKLIST_TRIGGERS=volumeBelowFloor,spreadTooHigh,volatilitySpike,repeatedSlippage

### Risk Governor
RISK_GOVERNOR_ENABLED=true
RISK_WINDOW_MINUTES=360
RISK_DRAWDOWN_CAUTION_PCT=1.0
RISK_DRAWDOWN_HALT_PCT=2.0
RISK_FEE_BURN_CAUTION_PCT=0.2
RISK_FEE_BURN_HALT_PCT=0.4
RISK_TREND_ADX_ON=25
RISK_TREND_ADX_OFF=18
RISK_MIN_STATE_SECONDS=300
RISK_HALT_MIN_SECONDS=600
RISK_HALT_MARKET_EXIT=false
RISK_HALT_CANCEL_ALL_ORDERS=false

### Persistence
PERSISTENCE_PATH=./data/state.json
PERSIST_TO_SQLITE=false
SQLITE_PATH=/app/data/bot.sqlite

### Optional: web/app auth
API_KEY=
CLIENT_KEY=
